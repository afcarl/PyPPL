<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Channels - PyPPL</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Channels";
    var mkdocs_page_input_path = "channels.md";
    var mkdocs_page_url = "/channels/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> PyPPL</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Introduction</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../basic-concepts-and-directory-structure/">Basics and folder structure</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../placeholders/">Templating</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Channels</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#channels">Channels</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#initialize-a-channel">Initialize a channel</a></li>
        
            <li><a class="toctree-l3" href="#methods-for-channels">Methods for channels</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../specify-input-and-output-of-a-process/">Input and output of a process</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../write-your-script/">The heart: script</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../export-output-files/">Output file exporting</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../caching/">Caching and resuming processes</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../runners/">Runners and running profiles</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../error-handling/">Error handling of processes</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../set-other-properties-of-a-process/">Other attributes of a process</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../configure-your-logs/">Log configuration</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../draw-flowchart-of-a-pipeline/">Pipeline flowchart</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../configure-a-pipeline/">Pipeline configuration</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../command-line-argument-parser/">Command line argument parser</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../aggregations/">Aggregations</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../command-line-tool/">Command line tool</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../api/">API</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../faq/">FAQ</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../change-log/">Change log</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">PyPPL</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Channels</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="channels">Channels</h1>
<p>Channels are used to pass data from one process (an instance of <code>Proc</code>) to another. It is derived from a <code>list</code>, where each element is a <code>tuple</code>. <strong>So all python functions/methods that apply on <code>list</code> will also apply on <code>Channel</code>.</strong> The length a the <code>tuple</code> corresponds to the number of variables of the input or output of a <code>proc</code>.
<div class="highlight"><pre><span></span><span class="c1"># v1  v2  v3</span>
<span class="n">c</span> <span class="o">=</span> <span class="p">[</span>
 <span class="p">(</span><span class="n">a1</span><span class="p">,</span> <span class="n">b1</span><span class="p">,</span> <span class="n">c1</span><span class="p">),</span>  <span class="c1"># data for job #0</span>
 <span class="p">(</span><span class="n">a2</span><span class="p">,</span> <span class="n">b2</span><span class="p">,</span> <span class="n">c2</span><span class="p">),</span>  <span class="c1"># data for job #1</span>
<span class="c1"># ...</span>
<span class="p">]</span>
</pre></div>
If we specify this channel to the input of a <code>proc</code>:
<div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">proc</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">input</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;v1,v2,v3&quot;</span><span class="p">:</span> <span class="n">c</span><span class="p">}</span>
</pre></div>
Then the values for different variables in different jobs wil be:</p>
<table>
<thead>
<tr>
<th>Job Index</th>
<th>v1</th>
<th>v2</th>
<th>v3</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>a1</td>
<td>b1</td>
<td>c1</td>
</tr>
<tr>
<td>1</td>
<td>a2</td>
<td>b2</td>
<td>c2</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
</tbody>
</table>
<h2 id="initialize-a-channel">Initialize a channel</h2>
<p>There are several ways to initialize a channel:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please use <code>Channel.create(...)</code> instead of <code>Channel(...)</code> unless each element is 'tuplized' properly. 
<div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span> <span class="o">!=</span> <span class="n">Channel</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span> <span class="o">==</span> <span class="n">Channel</span><span class="p">([(</span><span class="mi">1</span><span class="p">,),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,)])</span>
</pre></div></p>
</div>
<ul>
<li>
<p>From other channels: <br />
  <div class="highlight"><pre><span></span><span class="n">ch1</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)])</span>
<span class="n">ch2</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="n">ch3</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="n">ch</span>  <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">fromChannels</span><span class="p">(</span><span class="n">ch1</span><span class="p">,</span> <span class="n">ch2</span><span class="p">,</span> <span class="n">ch3</span><span class="p">)</span>
<span class="c1"># channels are column-bound</span>
<span class="c1"># ch == [(1, 2, &#39;a&#39;, 5), (3, 4, &#39;a&#39;, 6)]</span>
</pre></div></p>
</li>
<li>
<p>From a file path pattern:<br />
  Use <code>glob.glob</code> to grab files by the pattern, you may use different arguments for filter, sort or reverse the list:</p>
</li>
<li>
<p>filter the files with type (<code>t</code>): <code>dir</code>, <code>file</code>, <code>link</code> or <code>any</code> (default), </p>
</li>
<li>sort them by (<code>sortby</code>): <code>size</code>, <code>mtime</code> or <code>name</code> (default)</li>
<li>
<p>reverse the list (<code>reverse</code>): <code>False</code> (default, don't reverse)</p>
<div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">fromPattern</span> <span class="p">(</span><span class="s2">&quot;/a/b/*.txt&quot;</span><span class="p">,</span> <span class="n">t</span> <span class="o">=</span> <span class="s1">&#39;any&#39;</span><span class="p">,</span> <span class="n">sortby</span> <span class="o">=</span> <span class="s1">&#39;size&#39;</span><span class="p">,</span> <span class="n">reverse</span> <span class="o">=</span> <span class="bp">False</span><span class="p">)</span>
</pre></div>

</li>
<li>
<p>From file pairs:
  <div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">fromPairs</span> <span class="p">(</span><span class="s2">&quot;/a/b/*.txt&quot;</span><span class="p">)</span>
<span class="c1"># the files will be sorted by names and then split into pairs</span>
<span class="c1"># c == [(&quot;/a/b/a1.txt&quot;, &quot;/a/b/a2.txt&quot;), (&quot;/a/b/b1.txt&quot;, &quot;/a/b/b2.txt&quot;)]</span>
</pre></div></p>
</li>
<li>
<p>From file content:<br />
<code>Channel.fromFile(fn, header=False, skip=0, delimit="\t")</code>
  For example, we have a file <code>"chan.txt"</code> with content:
  <div class="highlight"><pre><span></span>A&lt;tab&gt;B&lt;tab&gt;C
a1&lt;tab&gt;b1&lt;tab&gt;c1
a2&lt;tab&gt;b2&lt;tab&gt;c2
</pre></div>
  Read the file as a channel:
  <div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">fromFile</span> <span class="p">(</span><span class="s2">&quot;chan.txt&quot;</span><span class="p">)</span>
<span class="c1"># c == [(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;), (&quot;a1&quot;, &quot;b1&quot;, &quot;c1&quot;), (&quot;a2&quot;, &quot;b2&quot;, &quot;c2&quot;)]</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">fromFile</span> <span class="p">(</span><span class="s2">&quot;chan.txt&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="c1"># c == [(&quot;a1&quot;, &quot;b1&quot;, &quot;c1&quot;), (&quot;a2&quot;, &quot;b2&quot;, &quot;c2&quot;)]</span>
<span class="c1"># c.A == [(&quot;a1&quot;, ), (&quot;a2&quot;, )]</span>
<span class="c1"># c.B == [(&quot;b1&quot;, ), (&quot;b2&quot;, )]</span>
<span class="c1"># c.C == [(&quot;c1&quot;, ), (&quot;c2&quot;, )]</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">fromFile</span> <span class="p">(</span><span class="s2">&quot;chan.txt&quot;</span><span class="p">,</span> <span class="n">skip</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="c1"># c == [(&quot;a1&quot;, &quot;b1&quot;, &quot;c1&quot;), (&quot;a2&quot;, &quot;b2&quot;, &quot;c2&quot;)]</span>
</pre></div></p>
</li>
<li>
<p>From <code>sys.argv</code> (command line arguments):
  <div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">==</span> <span class="n">channel</span><span class="o">.</span><span class="n">fromArgv</span><span class="p">()</span>
<span class="c1"># python whatever.py /a/b/*.txt</span>
<span class="c1"># c == [(&quot;/a/b/1.txt&quot;,), (&quot;/a/b/2.txt&quot;,), (&quot;/a/b/3.txt&quot;,), (&quot;/a/b/4.txt&quot;,)]</span>
<span class="c1"># Make a multple-variable channel:</span>
<span class="c1"># python whatever.py /a/b/1.txt,/a/b/2.txt /a/b/3.txt,/a/b/4.txt</span>
<span class="c1"># c == [(&quot;/a/b/1.txt&quot;, &quot;/a/b/2.txt&quot;), (&quot;/a/b/3.txt&quot;, &quot;/a/b/4.txt&quot;)]</span>
</pre></div></p>
</li>
<li>
<p>From command line argument parser:
  See <a href="https://pwwang.github.io/PyPPL/command-line-argument-parser.html">command line argument parser</a> for details.
  <div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyPPL</span> <span class="kn">import</span> <span class="n">Channel</span><span class="p">,</span> <span class="n">params</span>
<span class="n">params</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span>
<span class="n">params</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">params</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">int</span>
<span class="n">params</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">params</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">list</span>
<span class="n">params</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]</span>
<span class="n">params</span><span class="o">.</span><span class="n">d</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">list</span>
<span class="n">params</span><span class="o">.</span><span class="n">e</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">params</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">list</span>

<span class="n">ch</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">fromParams</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">)</span>
<span class="c1"># Raises ValueError, non-equal length</span>
<span class="n">ch</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">fromParams</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">)</span>
<span class="c1"># ch == [(1, &#39;a&#39;), (2, &#39;b&#39;)]</span>
<span class="n">ch</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">fromParams</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="c1"># ch == [(&#39;a&#39;, 2)]</span>
</pre></div></p>
</li>
</ul>
<h2 id="methods-for-channels">Methods for channels</h2>
<h3 id="get-the-length-and-width-of-a-channel">Get the length and width of a channel</h3>
<div class="highlight"><pre><span></span><span class="n">chan</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span> <span class="p">([(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">)])</span>
<span class="c1">#chan.length() == 2 == len(chan)</span>
<span class="c1">#chan.width()  == 3</span>
</pre></div>

<h3 id="get-value-from-a-channel">Get value from a channel</h3>
<div class="highlight"><pre><span></span><span class="n">chan</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span> <span class="p">([(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">)])</span>
<span class="c1"># chan.get() == 1</span>
<span class="c1"># chan.get(0) == 1</span>
<span class="c1"># chan.get(1) == 2</span>
<span class="c1"># chan.get(2) == 3</span>
<span class="c1"># chan.get(3) == 4</span>
<span class="c1"># chan.get(4) == 5</span>
<span class="c1"># chan.get(5) == 6</span>
</pre></div>

<h3 id="repeat-rows-and-columns">Repeat rows and columns</h3>
<div class="highlight"><pre><span></span><span class="n">chan</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span> <span class="p">([(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">)])</span>
<span class="n">chan2</span> <span class="o">=</span> <span class="n">chan</span><span class="o">.</span><span class="n">repCol</span><span class="p">()</span>
<span class="n">chan3</span> <span class="o">=</span> <span class="n">chan</span><span class="o">.</span><span class="n">repCol</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="c1"># chan2 == [(1,2,3,1,2,3), (4,5,6,4,5,6)]</span>
<span class="c1"># chan3 == [(1,2,3,1,2,3,1,2,3), (4,5,6,4,5,6,4,5,6)]</span>
<span class="n">chan4</span> <span class="o">=</span> <span class="n">chan</span><span class="o">.</span><span class="n">repRow</span><span class="p">()</span>
<span class="n">chan5</span> <span class="o">=</span> <span class="n">chan</span><span class="o">.</span><span class="n">repRow</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="c1"># chan4 == [(1,2,3), (4,5,6), (1,2,3), (4,5,6)]</span>
<span class="c1"># chan5 == [(1,2,3), (4,5,6), (1,2,3), (4,5,6), (1,2,3), (4,5,6)]</span>
</pre></div>

<h3 id="expand-a-channel-by-directory">Expand a channel by directory</h3>
<p><code>Channel.expand (col= 0, pattern = '*', t='any', sortby='name', reverse=False)</code></p>
<p>Sometimes we prepare files in one process (for example, split a big file into small ones in a directory), then handle these files by different jobs in another process, so that they can be processed simultaneously. </p>
<p><img alt="channel.expand" src="https://github.com/pwwang/pyppl/raw/master/docs/channel-expand.png" /> </p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<ul>
<li><code>expand</code> only works for original channels with length is 1, which will expand to <code>N</code> (number of files included). If original channel has more than 1 element, only first element will be used, and other elements will be ignored.</li>
<li>Only the value of the column to be expanded will be changed, values of other columns remain the same. </li>
</ul>
</div>
<h3 id="collapse-a-channel-by-files-in-a-common-ancestor-directory">Collapse a channel by files in a common ancestor directory</h3>
<p><code>Channel.collapse(col=0)</code></p>
<p>It's basically the reverse process of <code>expand</code>. It applies when you deal with different files and in next process you need them all involved (i.e. combine the results):</p>
<p><img alt="channel.expand" src="https://github.com/pwwang/pyppl/raw/master/docs/channel-collapse.png" /> </p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<ul>
<li><code>os.path.dirname(os.path.commonprefix(...))</code> is used to detect the common ancestor directory, so the files could be <code>['/a/1/1.file', '/a/2/1.file']</code>. In this case <code>/a/</code> will be returned.</li>
<li>values at other columns should be the same, <code>PyPPL</code> will NOT check it, the first value at the column will be used.</li>
</ul>
</div>
<h3 id="fetch-rows-from-a-channel">Fetch rows from a channel</h3>
<ul>
<li><code>Channel.rowAt(index)</code>  </li>
</ul>
<div class="highlight"><pre><span></span><span class="n">chan1</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span> <span class="p">([(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">)])</span>
<span class="n">chan2</span> <span class="o">=</span> <span class="n">chan1</span><span class="o">.</span><span class="n">rowAt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># chan2 == [(4,5,6,7)]</span>

<span class="c1"># Now you can also fetch multiple columus as a channel:</span>
<span class="n">chan3</span> <span class="o">=</span> <span class="n">chan1</span><span class="o">.</span><span class="n">rowAt</span><span class="p">([:</span><span class="mi">2</span><span class="p">])</span>
<span class="n">chan3</span> <span class="o">==</span> <span class="n">chan1</span>
</pre></div>

<h3 id="fetch-columns-from-a-channel">Fetch columns from a channel</h3>
<ul>
<li><code>Channel.slice(start, length=None)</code></li>
</ul>
<div class="highlight"><pre><span></span><span class="n">chan1</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span> <span class="p">([(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">)])</span>
<span class="n">chan2</span> <span class="o">=</span> <span class="n">chan1</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="c1"># chan2 == [(2,3), (5,6)]</span>
<span class="n">chan3</span> <span class="o">=</span> <span class="n">chan1</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="c1"># chan3 == [(3,4), (6,7)]</span>
<span class="n">chan4</span> <span class="o">=</span> <span class="n">chan1</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># chan4 == [(4,), (7,)]</span>
</pre></div>

<ul>
<li><code>Channel.colAt(index)</code></li>
</ul>
<div class="highlight"><pre><span></span><span class="n">chan</span><span class="o">.</span><span class="n">colAt</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="o">==</span> <span class="n">chan</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1"># Now you may also fetch multiple columns:</span>
<span class="n">chan</span><span class="o">.</span><span class="n">colAt</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span> <span class="o">==</span> <span class="n">chan</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>

<h3 id="flatten-a-channel">Flatten a channel</h3>
<p><code>Channel.flatten(col = None)</code>
Flatten a channel, make it into a list.
<div class="highlight"><pre><span></span><span class="n">chan</span>  <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span> <span class="p">([(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">)])</span>
<span class="n">f1</span> <span class="o">=</span> <span class="n">chan</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="c1"># f1 == [1,2,3,4,5,6]</span>
<span class="n">f2</span> <span class="o">=</span> <span class="n">chan</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># f1 == [2,5]</span>
</pre></div></p>
<h3 id="split-a-channel-to-single-width-channels">Split a channel to single-width channels</h3>
<p><code>Channel.split(flatten = False)</code>
<div class="highlight"><pre><span></span><span class="n">chan</span>  <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span> <span class="p">([(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">)])</span>
<span class="n">chans</span> <span class="o">=</span> <span class="n">chan</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="c1"># isinstance (chans, list) == True</span>
<span class="c1"># isinstance (chans, Channel) == False</span>
<span class="c1"># chans == [</span>
<span class="c1">#   [(1,), (4,)],  # isinstance (chans[0], Channel) == True</span>
<span class="c1">#   [(2,), (5,)],</span>
<span class="c1">#   [(3,), (6,)],</span>
<span class="c1"># ]</span>
<span class="n">chans2</span> <span class="o">=</span> <span class="n">chan</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<span class="c1"># chans2 == [</span>
<span class="c1">#   [1, 4],        # isinstance (chans2[0], Channel) == False</span>
<span class="c1">#   [2, 5],</span>
<span class="c1">#   [3, 6],</span>
<span class="c1"># ]</span>
</pre></div></p>
<h3 id="attach-column-names">Attach column names</h3>
<p><code>Channel.attach(*names)</code>
We can attach the column names and then use them to access the columns.
<div class="highlight"><pre><span></span><span class="n">ch</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">)])</span>
<span class="n">ch</span><span class="o">.</span><span class="n">attach</span> <span class="p">(</span><span class="s1">&#39;col1&#39;</span><span class="p">,</span> <span class="s1">&#39;col2&#39;</span><span class="p">,</span> <span class="s1">&#39;col3&#39;</span><span class="p">)</span>
<span class="c1"># ch.col1 == [(1,), (4,)]</span>
<span class="c1"># ch.col2 == [(2,), (5,)]</span>
<span class="c1"># ch.col3 == [(3,), (6,)]</span>
<span class="c1"># isinstance(ch.col1, Channel) == True</span>

<span class="c1"># flatten the columns</span>
<span class="n">ch</span><span class="o">.</span><span class="n">attach</span> <span class="p">(</span><span class="s1">&#39;col1&#39;</span><span class="p">,</span> <span class="s1">&#39;col2&#39;</span><span class="p">,</span> <span class="s1">&#39;col3&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
<span class="c1"># ch.col1 == [1,4]</span>
<span class="c1"># ch.col2 == [2.5]</span>
<span class="c1"># ch.col3 == [3,6]</span>
<span class="c1"># isinstance(ch.col1, Channel) == False</span>
</pre></div></p>
<h3 id="map-filter-reduce">Map, filter, reduce</h3>
<ul>
<li><code>Channel.map(func)</code></li>
<li><code>Channel.mapCol(func, col=0)</code>
  <div class="highlight"><pre><span></span><span class="n">ch1</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
<span class="n">ch2</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="n">ch3</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">([(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span>
<span class="c1"># ch1.map(lambda x: (x[0]*x[0],)) == []</span>
<span class="c1"># ch2.map(lambda x: (x[0]*x[0],)) == [(1,),(4,),(9,),(16,),(25,)]</span>
<span class="c1"># ch3.map(lambda x: (x[0], x[1]*x[1])) == [(&#39;a&#39;, 1), (&#39;b&#39;, 4)]</span>
<span class="c1"># ch1.mapCol(lambda x: x*x) == []</span>
<span class="c1"># ch2.mapCol(lambda x: x*x) == [(1,),(4,),(9,),(16,),(25,)]</span>
<span class="c1"># ch3.mapCol(lambda x: x*x, 1) == [(&#39;a&#39;, 1), (&#39;b&#39;, 4)]</span>
<span class="c1"># map &amp; mapCol return an instance of Channel</span>
</pre></div></li>
<li><code>Channel.filter(func)</code></li>
<li><code>Channel.filterCol(func, col=0)</code>
  <div class="highlight"><pre><span></span><span class="n">ch1</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">([</span>
  <span class="p">(</span><span class="mi">1</span><span class="p">,</span>    <span class="mi">0</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>   <span class="mi">1</span>  <span class="p">),</span>
  <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span>  <span class="s1">&#39;&#39;</span><span class="p">,</span>    <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">),</span>
  <span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>   <span class="mi">1</span>  <span class="p">),</span>
  <span class="p">([],</span>   <span class="p">[</span><span class="mi">1</span><span class="p">],</span>   <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
<span class="p">])</span>
<span class="c1"># Filter by the first column, only first three rows remained</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">filterCol</span><span class="p">()</span> <span class="o">==</span> <span class="n">ch1</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> 
<span class="c1"># Filter by the second column, only the last row remained</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">filterCol</span><span class="p">(</span><span class="n">col</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">ch1</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
<span class="c1"># Filter by the third column, the 2nd and 4th row remained</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">filterCol</span><span class="p">(</span><span class="n">col</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="n">ch1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">ch1</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span>
<span class="c1"># Filter by the fourth column, all rows remained</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">filterCol</span><span class="p">(</span><span class="n">col</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="n">ch1</span>
<span class="c1"># Filter with a function:		</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nb">int</span><span class="p">))</span> <span class="o">==</span> <span class="p">[</span><span class="n">ch1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ch1</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
<span class="c1"># filter &amp; filterCol return an instance of Channel</span>
</pre></div></li>
<li><code>Channel.reduce(func)</code></li>
<li><code>Channel.reduceCol(func, col=0)</code>
  <div class="highlight"><pre><span></span><span class="n">ch1</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
<span class="c1"># Raises TypeError, no elements</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>
<span class="n">ch1</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="c1"># Notice the different</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="c1"># x and y are tuples</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">reduceCol</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="mi">15</span>           <span class="c1"># x and y are numbers</span>
</pre></div></li>
</ul>
<h3 id="add-rowscolumns-to-a-channel">Add rows/columns to a channel</h3>
<ul>
<li><code>Channel.rbind(*rows)</code>  </li>
</ul>
<p>Each row can be either a channel, a tuple, a list or a non-iterable element(including string) <br />
  <div class="highlight"><pre><span></span><span class="n">ch1</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
<span class="n">ch2</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>

<span class="n">row1</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">row2</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="n">row3</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="n">row4</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,)</span>
<span class="n">row5</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">row6</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="n">row7</span> <span class="o">=</span> <span class="mi">5</span>

<span class="n">ch1</span><span class="o">.</span><span class="n">rbind</span><span class="p">(</span><span class="n">row1</span><span class="p">)</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="p">)]</span>
<span class="n">ch2</span><span class="o">.</span><span class="n">rbind</span><span class="p">(</span><span class="n">row1</span><span class="p">)</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)],</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">rbind</span><span class="p">(</span><span class="n">row2</span><span class="p">)</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)]</span>
<span class="n">ch2</span><span class="o">.</span><span class="n">rbind</span><span class="p">(</span><span class="n">row2</span><span class="p">)</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">rbind</span><span class="p">(</span><span class="n">row3</span><span class="p">)</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">3</span><span class="p">,)]</span>
<span class="n">ch2</span><span class="o">.</span><span class="n">rbind</span><span class="p">(</span><span class="n">row3</span><span class="p">)</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">rbind</span><span class="p">(</span><span class="n">row4</span><span class="p">)</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">3</span><span class="p">,)]</span>
<span class="n">ch2</span><span class="o">.</span><span class="n">rbind</span><span class="p">(</span><span class="n">row4</span><span class="p">)</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">rbind</span><span class="p">(</span><span class="n">row5</span><span class="p">)</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">)]</span>
<span class="n">ch2</span><span class="o">.</span><span class="n">rbind</span><span class="p">(</span><span class="n">row5</span><span class="p">)</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">rbind</span><span class="p">(</span><span class="n">row6</span><span class="p">)</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">)]</span>
<span class="n">ch2</span><span class="o">.</span><span class="n">rbind</span><span class="p">(</span><span class="n">row6</span><span class="p">)</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">rbind</span><span class="p">(</span><span class="n">row7</span><span class="p">)</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">5</span><span class="p">,)]</span>
<span class="n">ch2</span><span class="o">.</span><span class="n">rbind</span><span class="p">(</span><span class="n">row7</span><span class="p">)</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),(</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">)]</span>
</pre></div></p>
<ul>
<li>
<p><code>Channel.cbind(*cols)</code>
  <div class="highlight"><pre><span></span><span class="n">ch1</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)])</span>
<span class="n">ch2</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>

<span class="n">ch1</span><span class="o">.</span><span class="n">cbind</span><span class="p">(</span><span class="n">ch2</span><span class="p">)</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">)]</span>

<span class="n">ch2</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">cbind</span><span class="p">(</span><span class="n">ch2</span><span class="p">)</span>    <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">cbind</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">cbind</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">cbind</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>    <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)]</span>

<span class="n">ch1</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
<span class="n">ch2</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">([</span><span class="mi">21</span><span class="p">,</span> <span class="mi">22</span><span class="p">])</span>
<span class="n">ch3</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">ch4</span> <span class="o">=</span> <span class="p">[</span><span class="mi">41</span><span class="p">,</span> <span class="mi">42</span><span class="p">]</span>
<span class="n">ch5</span> <span class="o">=</span> <span class="p">(</span><span class="mi">51</span><span class="p">,</span> <span class="mi">52</span><span class="p">)</span>
<span class="n">ch6</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span>

<span class="n">ch1</span><span class="o">.</span><span class="n">cbind</span><span class="p">(</span><span class="n">ch2</span><span class="p">,</span> <span class="n">ch3</span><span class="p">,</span> <span class="n">ch4</span><span class="p">,</span> <span class="n">ch5</span><span class="p">,</span> <span class="n">ch6</span><span class="p">)</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">21</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">22</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">52</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">cbind</span><span class="p">(</span><span class="n">ch3</span><span class="p">)</span><span class="o">.</span><span class="n">cbind</span><span class="p">(</span><span class="n">ch6</span><span class="p">)</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)]</span>
</pre></div></p>
</li>
<li>
<p><code>Channel.insert(index, col)</code><br />
  <div class="highlight"><pre><span></span><span class="n">ch1</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)])</span>
<span class="n">ch2</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ch2</span><span class="p">)</span>    <span class="o">==</span> <span class="p">[(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">ch2</span><span class="p">)</span>    <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">ch2</span><span class="p">)</span>   <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">ch2</span><span class="p">)</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">)]</span>

<span class="n">ch2</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ch2</span><span class="p">)</span>    <span class="o">==</span> <span class="p">[(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">ch2</span><span class="p">)</span>    <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">ch2</span><span class="p">)</span>   <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">ch2</span><span class="p">)</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]</span>

<span class="n">ch1</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>    <span class="o">==</span> <span class="p">[(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>    <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>   <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>    <span class="o">==</span> <span class="p">[(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>    <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>   <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>       <span class="o">==</span> <span class="p">[(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>       <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>      <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>    <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)]</span>

<span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ch1</span><span class="p">,</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)])</span>

<span class="n">ch1</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
<span class="n">ch2</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">([</span><span class="mi">21</span><span class="p">,</span> <span class="mi">22</span><span class="p">])</span>
<span class="n">ch3</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">ch4</span> <span class="o">=</span> <span class="p">[</span><span class="mi">41</span><span class="p">,</span> <span class="mi">42</span><span class="p">]</span>
<span class="n">ch5</span> <span class="o">=</span> <span class="p">(</span><span class="mi">51</span><span class="p">,</span> <span class="mi">52</span><span class="p">)</span>
<span class="n">ch6</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span>
<span class="c1"># Raises ValueError, when 1 is inserted, it is a 1-width channel, </span>
<span class="c1"># then you can&#39;t insert a 2-width to it.</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">ch2</span><span class="p">)</span>
<span class="n">ch1</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">ch2</span><span class="p">,</span> <span class="n">ch3</span><span class="p">,</span> <span class="n">ch4</span><span class="p">,</span> <span class="n">ch5</span><span class="p">,</span> <span class="n">ch6</span><span class="p">)</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">21</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">22</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">52</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)]</span>
</pre></div></p>
</li>
</ul>
<h3 id="fold-a-channel">Fold a channel</h3>
<p><code>Channel.fold(n = 1)</code>
Fold a <code>channel</code>, Make a row to n-length chunk rows
For example, you have the following channel:</p>
<table>
<thead>
<tr>
<th>a1</th>
<th>a2</th>
<th>a3</th>
<th>a4</th>
</tr>
</thead>
<tbody>
<tr>
<td>b1</td>
<td>b2</td>
<td>b3</td>
<td>b4</td>
</tr>
</tbody>
</table>
<p>After apply <code>chan.fold(2)</code> you will get:</p>
<table>
<thead>
<tr>
<th>a1</th>
<th>a2</th>
</tr>
</thead>
<tbody>
<tr>
<td>a3</td>
<td>a4</td>
</tr>
<tr>
<td>b1</td>
<td>b2</td>
</tr>
<tr>
<td>b3</td>
<td>b4</td>
</tr>
</tbody>
</table>
<h3 id="unfold-a-channel">Unfold a channel</h3>
<p><code>Channel.unfold(n=2)</code>
Combine n-rows into one row; do the reverse thing as <code>Channel.fold</code>. But note that the different meaning of <code>n</code>. In <code>fold</code>, <code>n</code> means the length of the chunk that a row is cut to; will in <code>unfold</code>, it means how many rows to combine.</p>
<h3 id="copy-a-channel">Copy a channel</h3>
<p><code>Channel.copy()</code></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../specify-input-and-output-of-a-process/" class="btn btn-neutral float-right" title="Input and output of a process">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../placeholders/" class="btn btn-neutral" title="Templating"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../placeholders/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../specify-input-and-output-of-a-process/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js"></script>
      <script src="../search/require.js"></script>
      <script src="../search/search.js"></script>

</body>
</html>
